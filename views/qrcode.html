<html>
<head>
    <meta charset="UTF-8">
    <title>Chrome</title>
    <link type="text/css" rel='stylesheet' href='css/bootstrap.min.css'/>
    <link type="text/css" rel='stylesheet' href='css/style.css'/>

    <style>
        body {
            margin: 0;
        }

        .content {
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: center
        }
    </style>
</head>
<body>
<!-- Loader -->
<div id="preloader">
    <div id="status">
        <div class="spinner"></div>
    </div>
</div>
<h5><p class="tips mt-2 text-center"></p></h5>
<div class="content">
    <div id="qrcode" class='mt-3'></div>
</div>

<script>if (typeof module === 'object') {
    window.module = module;
    module = undefined;
}</script>
<script src="js/jquery.min.js" type="text/javascript"></script>
<script src="js/bootstrap.min.js" type="text/javascript"></script>
<script src="js/qrcode.min.js" type="text/javascript"></script>
<script>if (window.module) module = window.module;</script>
<script>

    let url;
    let load = false
    let go = () => {
        if (!load && url) {
            new QRCode(document.getElementById("qrcode"), {
                text: url,
                width: 256,
                height: 256,
                colorDark: "#000000",
                colorLight: "#ffffff",
                correctLevel: QRCode.CorrectLevel.H
            })
            load = true
        }
    }

    window.api.receive('fromMain', function (args) {
        console.log(JSON.stringify(args))
        $('#preloader').hide()
        if (args[1]) $('title').html(args[1])
        if (args[2]) $('.tips').html(args[2])
        url = args[0]
        go()
    })

</script>
</body>
</html>